FacultyDashboard

import React, { useState, useEffect, useRef } from 'react';
import { sessionsAPI, analyticsAPI } from '../utils/api';
import { Session, AnalyticsData } from '../types';
import { io, Socket } from 'socket.io-client';

interface FacultyDashboardProps {
  user: any;
  onLogout: () => void;
}

const FacultyDashboard: React.FC<FacultyDashboardProps> = ({ user, onLogout }) => {
  const [activeSession, setActiveSession] = useState<Session | null>(null);
  const [analytics, setAnalytics] = useState<AnalyticsData | null>(null);
  const [qrTimer, setQrTimer] = useState(60);
  const socketRef = useRef<Socket | null>(null);

  useEffect(() => {
    loadAnalytics();
    setupSocket();
    return () => {
      if (socketRef.current) {
        socketRef.current.disconnect();
      }
    };
  }, []);

  useEffect(() => {
    let timer: NodeJS.Timeout;
    if (activeSession && qrTimer > 0) {
      timer = setInterval(() => {
        setQrTimer((prev) => prev - 1);
      }, 1000);
    } else if (qrTimer === 0) {
      setActiveSession(null);
    }
    return () => clearInterval(timer);
  }, [activeSession, qrTimer]);

  const setupSocket = () => {
    socketRef.current = io('http://localhost:5000');
    socketRef.current.on('attendanceUpdate', (data) => {
      console.log('Real-time attendance update:', data);
      // Update UI in real-time
      if (activeSession && data.sessionCode === activeSession.sessionCode) {
        // You can update the attendance count here
      }
    });
  };

  const loadAnalytics = async () => {
    try {
      const response = await analyticsAPI.faculty();
      setAnalytics(response.data);
    } catch (error) {
      console.error('Error loading analytics:', error);
    }
  };

  const startSession = async () => {
    try {
      const response = await sessionsAPI.start({ className: 'Current Class' });
      setActiveSession(response.data.session);
      setQrTimer(60);
      
      if (socketRef.current) {
        socketRef.current.emit('joinSession', response.data.session.sessionCode);
      }
    } catch (error: any) {
      alert(error.response?.data?.error || 'Failed to start session');
    }
  };

  const endSession = async () => {
    if (!activeSession) return;
    
    try {
      await sessionsAPI.end(activeSession.id.toString());
      setActiveSession(null);
      alert('Session ended successfully');
    } catch (error: any) {
      alert(error.response?.data?.error || 'Failed to end session');
    }
  };

  const generateQRCode = async (sessionCode: string) => {
    try {
      // Simple QR code generation using an API
      const qrCodeUrl = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(sessionCode)}`;
      
      const qrCodeImg = document.getElementById('qrCodeImg') as HTMLImageElement;
      if (qrCodeImg) {
        qrCodeImg.src = qrCodeUrl;
      }
    } catch (error) {
      console.error('QR generation error:', error);
    }
  };

  useEffect(() => {
    if (activeSession) {
      generateQRCode(activeSession.sessionCode);
    }
  }, [activeSession]);

  return (
    <div className="min-h-screen bg-gray-50">
      <nav className="bg-primary-500 text-white shadow-lg">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center py-4">
            <div className="flex items-center space-x-3">
              <div className="bg-white text-primary-600 p-2 rounded-lg">
                <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"/>
                  <path fillRule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clipRule="evenodd"/>
                </svg>
              </div>
              <h1 className="text-2xl font-bold">Faculty Dashboard</h1>
            </div>
            <div className="flex items-center space-x-4">
              <span className="font-semibold">{user.name}</span>
              <button 
                onClick={onLogout}
                className="bg-white text-primary-600 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors"
              >
                Logout
              </button>
            </div>
          </div>
        </div>
      </nav>

      <div className="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
        {/* QR Code Section */}
        <div className="bg-white rounded-xl shadow-lg p-6 mb-6 fade-in">
          <div className="flex justify-between items-center mb-4">
            <h3 className="text-xl font-bold text-primary-600">üéØ Dynamic QR Attendance System</h3>
            <div className="space-x-2">
              <button 
                onClick={startSession}
                disabled={activeSession !== null}
                className="bg-primary-500 hover:bg-primary-600 disabled:bg-primary-300 text-white font-bold py-2 px-4 rounded-lg transition-colors"
              >
                Start New Session
              </button>
              {activeSession && (
                <button 
                  onClick={endSession}
                  className="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition-colors"
                >
                  End Session
                </button>
              )}
            </div>
          </div>

          {activeSession && (
            <div className="text-center">
              <div className="bg-primary-50 border-2 border-primary-200 rounded-lg p-4 inline-block">
                <img id="qrCodeImg" alt="QR Code" className="w-64 h-64 mx-auto" />
              </div>
              <p className="mt-3 text-sm text-gray-600">
                QR Code expires in: <span className="font-bold text-red-600">{qrTimer}</span> seconds
              </p>
              <p className="text-xs text-gray-500 mt-2">Session Code: {activeSession.sessionCode}</p>
              
              <div className="mt-4 grid grid-cols-3 gap-4 text-center max-w-md mx-auto">
                <div className="bg-blue-50 p-3 rounded-lg">
                  <div className="text-lg font-bold text-blue-600">60</div>
                  <div className="text-xs text-blue-700">Expected</div>
                </div>
                <div className="bg-green-50 p-3 rounded-lg">
                  <div className="text-lg font-bold text-green-600">{activeSession.attendees.length}</div>
                  <div className="text-xs text-green-700">Present</div>
                </div>
                <div className="bg-red-50 p-3 rounded-lg">
                  <div className="text-lg font-bold text-red-600">{60 - activeSession.attendees.length}</div>
                  <div className="text-xs text-red-700">Pending</div>
                </div>
              </div>

              {/* Attendance List */}
              {activeSession.attendees.length > 0 && (
                <div className="mt-4 max-w-md mx-auto">
                  <h4 className="font-semibold text-gray-700 mb-2">Recently Marked:</h4>
                  <div className="space-y-1 max-h-32 overflow-y-auto">
                    {activeSession.attendees.slice(-5).map((attendee, index) => (
                      <div key={index} className="flex justify-between items-center p-2 bg-gray-50 rounded">
                        <span className="text-sm">{attendee.studentName}</span>
                        <span className="text-xs text-gray-500">
                          {new Date(attendee.timestamp).toLocaleTimeString()}
                        </span>
                      </div>
                    ))}
                  </div>
                </div>
              )}
            </div>
          )}
        </div>

        {/* Analytics Section */}
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div className="bg-white rounded-xl shadow-lg p-6 fade-in">
            <h3 className="text-xl font-bold text-primary-600 mb-4">Class Analytics</h3>
            {analytics?.classStats && (
              <div className="grid grid-cols-2 gap-4">
                <div className="bg-green-50 p-4 rounded-lg border border-green-200">
                  <div className="text-2xl font-bold text-green-600">{analytics.classStats.avgAttendance}%</div>
                  <div className="text-sm text-green-700">Avg Attendance</div>
                </div>
                <div className="bg-blue-50 p-4 rounded-lg border border-blue-200">
                  <div className="text-2xl font-bold text-blue-600">{analytics.classStats.avgMarks}%</div>
                  <div className="text-sm text-blue-700">Avg Marks</div>
                </div>
                <div className="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                  <div className="text-2xl font-bold text-yellow-600">{analytics.classStats.totalStudents}</div>
                  <div className="text-sm text-yellow-700">Total Students</div>
                </div>
                <div className="bg-red-50 p-4 rounded-lg border border-red-200">
                  <div className="text-2xl font-bold text-red-600">{analytics.classStats.atRiskCount}</div>
                  <div className="text-sm text-red-700">At Risk</div>
                </div>
              </div>
            )}
          </div>

          <div className="bg-white rounded-xl shadow-lg p-6 fade-in">
            <h3 className="text-xl font-bold text-primary-600 mb-4">Student Overview</h3>
            {analytics?.students && (
              <div className="space-y-3 max-h-64 overflow-y-auto">
                {analytics.students.map((student, index) => (
                  <div key={index} className="flex justify-between items-center p-3 border-b">
                    <div>
                      <span className="font-medium">{student.name}</span>
                      <span className="text-sm text-gray-500 ml-2">({student.id})</span>
                    </div>
                    <div className="text-right">
                      <span className={`px-2 py-1 rounded text-xs ${
                        student.attendance >= 90 ? 'bg-green-100 text-green-800' :
                        student.attendance >= 75 ? 'bg-yellow-100 text-yellow-800' :
                        'bg-red-100 text-red-800'
                      }`}>
                        {student.attendance}%
                      </span>
                    </div>
                  </div>
                ))}
              </div>
            )}
          </div>
        </div>

        {/* Quick Actions */}
        <div className="mt-6 bg-white rounded-xl shadow-lg p-6 fade-in">
          <h3 className="text-xl font-bold text-primary-600 mb-4">Quick Actions</h3>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            <button className="bg-green-500 hover:bg-green-600 text-white p-4 rounded-lg transition-colors">
              üìä Generate Report
            </button>
            <button className="bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-lg transition-colors">
              üìß Email Parents
            </button>
            <button className="bg-purple-500 hover:bg-purple-600 text-white p-4 rounded-lg transition-colors">
              üéØ Schedule Counseling
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

export default FacultyDashboard;


HODDashboard


import React, { useState, useEffect } from 'react';
import { analyticsAPI } from '../utils/api';
import { AnalyticsData } from '../types';

interface HODDashboardProps {
  user: any;
  onLogout: () => void;
}

const HODDashboard: React.FC<HODDashboardProps> = ({ user, onLogout }) => {
  const [analytics, setAnalytics] = useState<AnalyticsData | null>(null);

  useEffect(() => {
    loadAnalytics();
  }, []);

  const loadAnalytics = async () => {
    try {
      const response = await analyticsAPI.hod();
      setAnalytics(response.data);
    } catch (error) {
      console.error('Error loading analytics:', error);
    }
  };

  return (
    <div className="min-h-screen bg-gray-50">
      <nav className="bg-primary-500 text-white shadow-lg">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center py-4">
            <div className="flex items-center space-x-3">
              <div className="bg-white text-primary-600 p-2 rounded-lg">
                <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                  <path fillRule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clipRule="evenodd"/>
                </svg>
              </div>
              <h1 className="text-2xl font-bold">HOD Dashboard - {user.department}</h1>
            </div>
            <div className="flex items-center space-x-4">
              <span className="font-semibold">{user.name}</span>
              <button 
                onClick={onLogout}
                className="bg-white text-primary-600 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors"
              >
                Logout
              </button>
            </div>
          </div>
        </div>
      </nav>

      <div className="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
        {/* Department Overview */}
        <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
          <div className="bg-white rounded-xl shadow-lg p-6 text-center">
            <div className="text-3xl font-bold text-blue-600">{analytics?.totalStudents || 0}</div>
            <div className="text-sm text-gray-600">Total Students</div>
          </div>
          <div className="bg-white rounded-xl shadow-lg p-6 text-center">
            <div className="text-3xl font-bold text-green-600">{analytics?.avgAttendance || 0}%</div>
            <div className="text-sm text-gray-600">Avg Attendance</div>
          </div>
          <div className="bg-white rounded-xl shadow-lg p-6 text-center">
            <div className="text-3xl font-bold text-red-600">{analytics?.atRiskStudents?.length || 0}</div>
            <div className="text-sm text-gray-600">At Risk Students</div>
          </div>
          <div className="bg-white rounded-xl shadow-lg p-6 text-center">
            <div className="text-3xl font-bold text-purple-600">82%</div>
            <div className="text-sm text-gray-600">Department Rank</div>
          </div>
        </div>

        {/* At-Risk Students */}
        <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
          <h3 className="text-xl font-bold text-primary-600 mb-4">‚ö†Ô∏è At-Risk Students (Below 75%)</h3>
          {analytics?.atRiskStudents && analytics.atRiskStudents.length > 0 ? (
            <div className="overflow-x-auto">
              <table className="w-full">
                <thead>
                  <tr className="bg-primary-50">
                    <th className="px-4 py-3 text-left font-semibold text-primary-700">Roll No</th>
                    <th className="px-4 py-3 text-left font-semibold text-primary-700">Name</th>
                    <th className="px-4 py-3 text-center font-semibold text-primary-700">Attendance</th>
                    <th className="px-4 py-3 text-center font-semibold text-primary-700">Avg Marks</th>
                    <th className="px-4 py-3 text-center font-semibold text-primary-700">Status</th>
                    <th className="px-4 py-3 text-center font-semibold text-primary-700">Action</th>
                  </tr>
                </thead>
                <tbody>
                  {analytics.atRiskStudents.map((student, index) => (
                    <tr key={index} className="border-b hover:bg-gray-50">
                      <td className="px-4 py-3 font-semibold">{student.id}</td>
                      <td className="px-4 py-3">{student.name}</td>
                      <td className="px-4 py-3 text-center">
                        <span className={`px-2 py-1 rounded text-xs ${
                          student.attendance >= 75 ? 'bg-green-100 text-green-800' :
                          student.attendance >= 60 ? 'bg-yellow-100 text-yellow-800' :
                          'bg-red-100 text-red-800'
                        }`}>
                          {student.attendance}%
                        </span>
                      </td>
                      <td className="px-4 py-3 text-center">{student.marks}%</td>
                      <td className="px-4 py-3 text-center">
                        <span className={`px-2 py-1 rounded text-xs ${
                          student.status === 'Critical' ? 'bg-red-100 text-red-800' :
                          student.status === 'Warning' ? 'bg-yellow-100 text-yellow-800' :
                          'bg-blue-100 text-blue-800'
                        }`}>
                          {student.status}
                        </span>
                      </td>
                      <td className="px-4 py-3 text-center">
                        <button className="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-xs">
                          Counsel
                        </button>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          ) : (
            <div className="text-center py-8 text-gray-500">
              <span className="text-2xl">üéâ</span>
              <p className="mt-2">No at-risk students! Great job!</p>
            </div>
          )}
        </div>

        {/* Faculty Performance & Insights */}
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div className="bg-white rounded-xl shadow-lg p-6">
            <h3 className="text-xl font-bold text-primary-600 mb-4">üë®‚Äçüè´ Faculty Performance</h3>
            <div className="space-y-4">
              {[
                { name: 'Dr. Raj Kumar', attendance: 92, engagement: 88 },
                { name: 'Prof. Priya Sharma', attendance: 85, engagement: 82 },
                { name: 'Dr. Sanjay Patel', attendance: 78, engagement: 75 },
                { name: 'Ms. Divya Singh', attendance: 88, engagement: 85 }
              ].map((faculty, index) => (
                <div key={index} className="flex justify-between items-center p-3 border-b">
                  <div>
                    <span className="font-medium">{faculty.name}</span>
                    <div className="text-sm text-gray-500">
                      Attendance: {faculty.attendance}% ‚Ä¢ Engagement: {faculty.engagement}%
                    </div>
                  </div>
                  <span className={`px-2 py-1 rounded text-xs ${
                    faculty.attendance >= 90 ? 'bg-green-100 text-green-800' :
                    faculty.attendance >= 80 ? 'bg-yellow-100 text-yellow-800' :
                    'bg-red-100 text-red-800'
                  }`}>
                    {faculty.attendance >= 90 ? 'Excellent' : faculty.attendance >= 80 ? 'Good' : 'Needs Focus'}
                  </span>
                </div>
              ))}
            </div>
          </div>

          <div className="bg-white rounded-xl shadow-lg p-6">
            <h3 className="text-xl font-bold text-primary-600 mb-4">ü§ñ Predictive Insights & Actions</h3>
            <div className="space-y-3 text-gray-700">
              <div className="flex items-start space-x-2">
                <span className="text-red-500 mt-1">‚ö†Ô∏è</span>
                <span>Attendance may drop by <b className="text-red-600">3%</b> next month due to lab engagement</span>
              </div>
              <div className="flex items-start space-x-2">
                <span className="text-blue-500 mt-1">üí°</span>
                <span>Encourage faculty to monitor lab sessions more closely</span>
              </div>
              <div className="flex items-start space-x-2">
                <span className="text-green-500 mt-1">üéØ</span>
                <span>Launch attendance reward program for <b>Semester 3</b> students</span>
              </div>
              <div className="flex items-start space-x-2">
                <span className="text-purple-500 mt-1">üìä</span>
                <span>Schedule weekly faculty meetings to review progress</span>
              </div>
            </div>

            <div className="mt-4 space-y-2">
              <button className="w-full bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg transition-colors">
                üìß Send Department Update
              </button>
              <button className="w-full bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition-colors">
                üìä Generate Performance Report
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default HODDashboard;


PrincipalDashboard


import React, { useState, useEffect } from 'react';
import { analyticsAPI } from '../utils/api';
import { AnalyticsData } from '../types';

interface PrincipalDashboardProps {
  user: any;
  onLogout: () => void;
}

const PrincipalDashboard: React.FC<PrincipalDashboardProps> = ({ user, onLogout }) => {
  const [analytics, setAnalytics] = useState<AnalyticsData | null>(null);

  useEffect(() => {
    loadAnalytics();
  }, []);

  const loadAnalytics = async () => {
    try {
      const response = await analyticsAPI.principal();
      setAnalytics(response.data);
    } catch (error) {
      console.error('Error loading analytics:', error);
    }
  };

  return (
    <div className="min-h-screen bg-gray-50">
      <nav className="bg-primary-500 text-white shadow-lg">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center py-4">
            <div className="flex items-center space-x-3">
              <div className="bg-white text-primary-600 p-2 rounded-lg">
                <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                  <path fillRule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clipRule="evenodd"/>
                </svg>
              </div>
              <h1 className="text-2xl font-bold">Principal Dashboard</h1>
            </div>
            <div className="flex items-center space-x-4">
              <span className="font-semibold">{user.name}</span>
              <button 
                onClick={onLogout}
                className="bg-white text-primary-600 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors"
              >
                Logout
              </button>
            </div>
          </div>
        </div>
      </nav>

      <div className="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
        {/* College Overview */}
        <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
          <div className="bg-white rounded-xl shadow-lg p-6 text-center">
            <div className="text-3xl font-bold text-blue-600">1,250</div>
            <div className="text-sm text-gray-600">Total Students</div>
          </div>
          <div className="bg-white rounded-xl shadow-lg p-6 text-center">
            <div className="text-3xl font-bold text-green-600">86%</div>
            <div className="text-sm text-gray-600">College Attendance</div>
          </div>
          <div className="bg-white rounded-xl shadow-lg p-6 text-center">
            <div className="text-3xl font-bold text-yellow-600">45</div>
            <div className="text-sm text-gray-600">At Risk Students</div>
          </div>
          <div className="bg-white rounded-xl shadow-lg p-6 text-center">
            <div className="text-3xl font-bold text-purple-600">82%</div>
            <div className="text-sm text-gray-600">Avg Marks</div>
          </div>
        </div>

        {/* Department Analytics */}
        <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
          <h3 className="text-xl font-bold text-primary-600 mb-4">Department Performance</h3>
          {analytics?.analytics && (
            <div className="overflow-x-auto">
              <table className="w-full">
                <thead>
                  <tr className="bg-primary-50">
                    <th className="px-4 py-3 text-left font-semibold text-primary-700">Department</th>
                    <th className="px-4 py-3 text-center font-semibold text-primary-700">Avg Attendance</th>
                    <th className="px-4 py-3 text-center font-semibold text-primary-700">At Risk Students</th>
                    <th className="px-4 py-3 text-center font-semibold text-primary-700">Total Students</th>
                    <th className="px-4 py-3 text-center font-semibold text-primary-700">Status</th>
                  </tr>
                </thead>
                <tbody>
                  {analytics.analytics.map((dept, index) => (
                    <tr key={index} className="border-b hover:bg-gray-50">
                      <td className="px-4 py-3 font-semibold">{dept.department}</td>
                      <td className="px-4 py-3 text-center">
                        <span className={`px-2 py-1 rounded-full text-sm ${
                          dept.avgAttendance >= 85 ? 'bg-green-100 text-green-800' :
                          dept.avgAttendance >= 75 ? 'bg-yellow-100 text-yellow-800' :
                          'bg-red-100 text-red-800'
                        }`}>
                          {dept.avgAttendance}%
                        </span>
                      </td>
                      <td className="px-4 py-3 text-center">
                        <span className="px-2 py-1 bg-red-100 text-red-800 rounded-full text-sm">
                          {dept.atRiskStudents}
                        </span>
                      </td>
                      <td className="px-4 py-3 text-center">{dept.totalStudents}</td>
                      <td className="px-4 py-3 text-center">
                        <span className={`px-2 py-1 rounded text-xs ${
                          dept.remark === 'Excellent' ? 'bg-green-100 text-green-800' :
                          dept.remark === 'Good' ? 'bg-blue-100 text-blue-800' :
                          'bg-red-100 text-red-800'
                        }`}>
                          {dept.remark}
                        </span>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          )}
        </div>

        {/* Predictive Insights */}
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div className="bg-white rounded-xl shadow-lg p-6">
            <h3 className="text-xl font-bold text-primary-600 mb-4">üìà Predictive Insights</h3>
            <div className="space-y-3 text-gray-700">
              <div className="flex items-start space-x-2">
                <span className="text-red-500 mt-1">‚ö†Ô∏è</span>
                <span>Overall attendance may drop by <b className="text-red-600">2%</b> next month</span>
              </div>
              <div className="flex items-start space-x-2">
                <span className="text-blue-500 mt-1">üí°</span>
                <span>Focus on <b>Mechanical Engineering</b> department for improvement</span>
              </div>
              <div className="flex items-start space-x-2">
                <span className="text-green-500 mt-1">üéØ</span>
                <span><b>Computer Science</b> department performing exceptionally well</span>
              </div>
            </div>
          </div>

          <div className="bg-white rounded-xl shadow-lg p-6">
            <h3 className="text-xl font-bold text-primary-600 mb-4">üöÄ Recommended Actions</h3>
            <div className="space-y-3">
              <button className="w-full bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition-colors text-left">
                üìä Generate College Performance Report
              </button>
              <button className="w-full bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg transition-colors text-left">
                üéì Launch Attendance Reward Program
              </button>
              <button className="w-full bg-purple-500 hover:bg-purple-600 text-white py-2 px-4 rounded-lg transition-colors text-left">
                üìÖ Schedule Department Review Meetings
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default PrincipalDashboard;


StudentDashboard


import React, { useState, useEffect } from 'react';
import { analyticsAPI } from '../utils/api';
import { AnalyticsData } from '../types';

interface StudentDashboardProps {
  user: any;
  onLogout: () => void;
}

const StudentDashboard: React.FC<StudentDashboardProps> = ({ user, onLogout }) => {
  const [analytics, setAnalytics] = useState<AnalyticsData | null>(null);

  useEffect(() => {
    loadAnalytics();
  }, []);

  const loadAnalytics = async () => {
    try {
      const response = await analyticsAPI.student();
      setAnalytics(response.data);
    } catch (error) {
      console.error('Error loading analytics:', error);
    }
  };

  return (
    <div className="min-h-screen bg-gray-50">
      <nav className="bg-primary-500 text-white shadow-lg">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between items-center py-4">
            <div className="flex items-center space-x-3">
              <div className="bg-white text-primary-600 p-2 rounded-lg">
                <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"/>
                  <path fillRule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clipRule="evenodd"/>
                </svg>
              </div>
              <h1 className="text-2xl font-bold">Student Dashboard</h1>
            </div>
            <div className="flex items-center space-x-4">
              <span className="font-semibold">{user.name}</span>
              <button 
                onClick={onLogout}
                className="bg-white text-primary-600 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors"
              >
                Logout
              </button>
            </div>
          </div>
        </div>
      </nav>

      <div className="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
        {/* Quick Actions */}
        <div className="text-center mb-6">
          <button className="bg-primary-500 hover:bg-primary-600 text-white font-bold py-3 px-6 rounded-lg transition-all duration-300 transform hover:scale-105">
            üì± Scan QR to Mark Attendance
          </button>
        </div>

        {/* Performance Overview */}
        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
          <div className="bg-white rounded-xl shadow-lg p-6 text-center">
            <div className="text-3xl font-bold text-green-600">{analytics?.student?.attendance || 0}%</div>
            <div className="text-sm text-gray-600">Overall Attendance</div>
          </div>
          <div className="bg-white rounded-xl shadow-lg p-6 text-center">
            <div className="text-3xl font-bold text-blue-600">{analytics?.student?.marks || 0}%</div>
            <div className="text-sm text-gray-600">Average Marks</div>
          </div>
          <div className="bg-white rounded-xl shadow-lg p-6 text-center">
            <div className="text-3xl font-bold text-purple-600">A</div>
            <div className="text-sm text-gray-600">Current Grade</div>
          </div>
        </div>

        {/* Subject-wise Performance */}
        <div className="bg-white rounded-xl shadow-lg p-6 mb-6">
          <h3 className="text-xl font-bold text-primary-600 mb-4">üìö Subject-wise Performance</h3>
          {analytics?.subjectAttendance && (
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
              {analytics.subjectAttendance.map((subject, index) => (
                <div key={index} className="border rounded-lg p-4 text-center">
                  <div className="text-lg font-semibold text-gray-800">{subject.subject}</div>
                  <div className={`text-2xl font-bold mt-2 ${
                    subject.attendance >= 90 ? 'text-green-600' :
                    subject.attendance >= 75 ? 'text-yellow-600' : 'text-red-600'
                  }`}>
                    {subject.attendance}%
                  </div>
                  <div className="text-sm text-gray-500 mt-1">Attendance</div>
                </div>
              ))}
            </div>
          )}
        </div>

        {/* AI-Powered Insights */}
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div className="bg-white rounded-xl shadow-lg p-6">
            <h3 className="text-xl font-bold text-primary-600 mb-4">üìà Attendance Trend</h3>
            {analytics?.attendanceTrend && (
              <div className="space-y-3">
                {analytics.attendanceTrend.map((attendance, index) => (
                  <div key={index} className="flex justify-between items-center">
                    <span className="text-gray-600">Month {index + 1}</span>
                    <div className="flex items-center space-x-2">
                      <div className="w-32 bg-gray-200 rounded-full h-2">
                        <div 
                          className="bg-green-500 h-2 rounded-full"
                          style={{ width: `${attendance}%` }}
                        ></div>
                      </div>
                      <span className={`text-sm font-medium ${
                        attendance >= 90 ? 'text-green-600' :
                        attendance >= 75 ? 'text-yellow-600' : 'text-red-600'
                      }`}>
                        {attendance}%
                      </span>
                    </div>
                  </div>
                ))}
              </div>
            )}
          </div>

          <div className="bg-white rounded-xl shadow-lg p-6">
            <h3 className="text-xl font-bold text-primary-600 mb-4">ü§ñ Smart Insights</h3>
            <div className="space-y-3 text-gray-700">
              <div className="flex items-start space-x-2">
                <span className="text-green-500 mt-1">‚úÖ</span>
                <span>You're doing great! Maintain attendance above <b>85%</b> to stay in safe zone</span>
              </div>
              <div className="flex items-start space-x-2">
                <span className="text-blue-500 mt-1">üìä</span>
                <span>Missed most classes on <b>Mondays</b> - try attending all sessions this week!</span>
              </div>
              <div className="flex items-start space-x-2">
                <span className="text-purple-500 mt-1">üéØ</span>
                <span>AI predicts your next month attendance will be <b className="text-purple-600">91%</b></span>
              </div>
              <div className="flex items-start space-x-2">
                <span className="text-yellow-500 mt-1">‚≠ê</span>
                <span>You're in the <b>top 15%</b> of your class based on current performance</span>
              </div>
            </div>

            <div className="mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200">
              <h4 className="font-semibold text-blue-800 mb-2">üéì Study Recommendations</h4>
              <ul className="text-sm text-blue-700 space-y-1">
                <li>‚Ä¢ Focus on practicing DSA problems daily</li>
                <li>‚Ä¢ Review Cloud Computing concepts weekly</li>
                <li>‚Ä¢ Join the coding club for extra practice</li>
              </ul>
            </div>
          </div>
        </div>

        {/* Quick Resources */}
        <div className="mt-6 bg-white rounded-xl shadow-lg p-6">
          <h3 className="text-xl font-bold text-primary-600 mb-4">üöÄ Quick Resources</h3>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            <button className="bg-green-500 hover:bg-green-600 text-white p-4 rounded-lg transition-colors text-left">
              üìö Study Materials
            </button>
            <button className="bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-lg transition-colors text-left">
              üìÖ Time Table
            </button>
            <button className="bg-purple-500 hover:bg-purple-600 text-white p-4 rounded-lg transition-colors text-left">
              üìä Performance Report
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

export default StudentDashboard;
